<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>清明上河图</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            touch-action: none; /* Disable browser's default touch actions */
        }
        
        .fullscreen-container {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            position: relative;
            background-color: #1a1a1a;
        }
        
        .scroll-container {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
            cursor: default; /* Default cursor */
            touch-action: none; /* Disable browser's default touch actions */
        }
        
        .image-strip {
            display: flex;
            flex-direction: row-reverse;
            flex-wrap: nowrap;
            width: max-content;
            height: 100%;
            transform-origin: center;
            position: relative;
        }
        
        .image-item {
            margin: 0;
            padding: 0;
            height: 100%;
            display: flex;
            align-items: center;
        }
        
        .image-item img {
            height: auto;
            width: auto;
            max-height: 100%;
        }
        
        /* Disable text selection */
        .no-select {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* Zoom Controls */
        .zoom-controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            padding: 8px;
            z-index: 10;
        }
        
        .zoom-btn {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border-radius: 4px;
            cursor: pointer;
            margin: 0 4px;
            font-weight: bold;
            font-size: 18px;
        }
        
        .zoom-level {
            color: white;
            margin: 0 8px;
            min-width: 60px;
            text-align: center;
        }
        
        /* Instructions */
        .instructions {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 10px;
            border-radius: 8px;
            font-size: 14px;
            max-width: 250px;
            z-index: 10;
        }
        
        .instructions ul {
            margin: 5px 0 0 15px;
            padding: 0;
        }
        
        .instructions li {
            margin-bottom: 2px;
        }

        /* Media query for mobile */
        @media (max-width: 768px) {
            .instructions {
                font-size: 12px;
                max-width: 200px;
                padding: 8px;
            }
            
            .zoom-controls {
                bottom: 10px;
                right: 10px;
            }
            
            .zoom-btn {
                width: 26px;
                height: 26px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="fullscreen-container">
        <div class="scroll-container no-select" id="scrollContainer">
            <div class="image-strip" id="imageStrip">
                <!-- Images with original size -->
                <div class="image-item">
                    <img src="images/01.png" alt="Image 01">
                </div>
                <div class="image-item">
                    <img src="images/02.png" alt="Image 02">
                </div>
                <div class="image-item">
                    <img src="images/03.png" alt="Image 03">
                </div>
                <div class="image-item">
                    <img src="images/04.png" alt="Image 04">
                </div>
                <div class="image-item">
                    <img src="images/05.png" alt="Image 05">
                </div>
                <div class="image-item">
                    <img src="images/06.png" alt="Image 06">
                </div>
                <div class="image-item">
                    <img src="images/07.png" alt="Image 07">
                </div>
                <div class="image-item">
                    <img src="images/08.png" alt="Image 08">
                </div>
                <div class="image-item">
                    <img src="images/09.png" alt="Image 09">
                </div>
                <div class="image-item">
                    <img src="images/10.png" alt="Image 10">
                </div>
                <div class="image-item">
                    <img src="images/11.png" alt="Image 11">
                </div>
                <div class="image-item">
                    <img src="images/12.png" alt="Image 12">
                </div>
                <div class="image-item">
                    <img src="images/13.png" alt="Image 13">
                </div>
                <div class="image-item">
                    <img src="images/14.png" alt="Image 14">
                </div>
                <div class="image-item">
                    <img src="images/15.png" alt="Image 15">
                </div>
                <div class="image-item">
                    <img src="images/16.png" alt="Image 16">
                </div>
                <div class="image-item">
                    <img src="images/17.png" alt="Image 17">
                </div>
                <div class="image-item">
                    <img src="images/18.png" alt="Image 18">
                </div>
                <div class="image-item">
                    <img src="images/19.png" alt="Image 19">
                </div>
                <div class="image-item">
                    <img src="images/20.png" alt="Image 20">
                </div>
                <div class="image-item">
                    <img src="images/21.png" alt="Image 21">
                </div>
                <div class="image-item">
                    <img src="images/22.png" alt="Image 22">
                </div>
                <div class="image-item">
                    <img src="images/23.png" alt="Image 23">
                </div>
                <div class="image-item">
                    <img src="images/24.png" alt="Image 24">
                </div>
                <div class="image-item">
                    <img src="images/25.png" alt="Image 25">
                </div>
                <div class="image-item">
                    <img src="images/26.png" alt="Image 26">
                </div>
                <div class="image-item">
                    <img src="images/27.png" alt="Image 27">
                </div>
                <div class="image-item">
                    <img src="images/28.png" alt="Image 28">
                </div>
                <div class="image-item">
                    <img src="images/29.png" alt="Image 29">
                </div>
            </div>
        </div>
        
        <!-- Zoom Controls -->
        <div class="zoom-controls">
            <div class="zoom-btn" id="zoomOut">−</div>
            <div class="zoom-level" id="zoomLevel">100%</div>
            <div class="zoom-btn" id="zoomIn">+</div>
            <div class="zoom-btn ml-2" id="resetZoom">↺</div>
        </div>
        
        <!-- Instructions -->
        <div class="instructions">
            <ul>
<li>双击居中图片</li>
<li>鼠标滚轮缩放</li>
<li>方向键移动图片</li>
            </ul>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const container = document.getElementById('scrollContainer');
            const imageStrip = document.getElementById('imageStrip');
            const zoomInBtn = document.getElementById('zoomIn');
            const zoomOutBtn = document.getElementById('zoomOut');
            const resetZoomBtn = document.getElementById('resetZoom');
            const zoomLevelDisplay = document.getElementById('zoomLevel');
            
            let currentZoom = 1;
            const zoomStep = 0.1;
            const minZoom = 0.2;
            const maxZoom = 20;
            
            // Position tracking variables
            let translateX = 0;
            let translateY = 0;
            
            // Movement step for keyboard navigation
            const moveStep = 30;
            
            // Touch event tracking
            let isDragging = false;
            let lastTouchX = 0;
            let lastTouchY = 0;
            let lastDistance = 0;
            let doubleTapTimer = null;
            let lastTapTime = 0;
            
            // Center the image strip initially
            function centerImageStrip() {
                const containerWidth = container.clientWidth;
                const stripWidth = imageStrip.clientWidth * currentZoom;
                
                if (stripWidth > containerWidth) {
                    // If the strip is wider than the container, position it to show the rightmost part
                    translateX = -(stripWidth - containerWidth);
                } else {
                    // Otherwise center it
                    translateX = (containerWidth - stripWidth) / 2;
                }
                translateY = 0;
                updateTransform();
                updateZoomDisplay();
            }
            
            // Update zoom level and position
            function updateTransform() {
                imageStrip.style.transform = `translate(${translateX}px, ${translateY}px) scale(${currentZoom})`;
            }
            
            // Update zoom level display
            function updateZoomDisplay() {
                zoomLevelDisplay.textContent = `${Math.round(currentZoom * 100)}%`;
            }
            
            // Change zoom level
            function changeZoom(delta, centerX, centerY) {
                const newZoom = Math.min(Math.max(currentZoom + delta, minZoom), maxZoom);
                
                if (newZoom !== currentZoom) {
                    // Use container center if no specific center point provided
                    if (centerX === undefined || centerY === undefined) {
                        const rect = container.getBoundingClientRect();
                        centerX = rect.width / 2;
                        centerY = rect.height / 2;
                    }
                    
                    // Calculate new position based on center position
                    const scale = newZoom / currentZoom;
                    
                    // Adjust position to zoom toward center
                    translateX = centerX - (centerX - translateX) * scale;
                    translateY = centerY - (centerY - translateY) * scale;
                    
                    currentZoom = newZoom;
                    updateTransform();
                    updateZoomDisplay();
                }
            }
            
            // Mouse wheel zoom
            container.addEventListener('wheel', function(e) {
                e.preventDefault();
                
                // Get mouse position relative to container
                const rect = container.getBoundingClientRect();
                const mouseX = e.clientX - rect.left;
                const mouseY = e.clientY - rect.top;
                
                // Calculate zoom change
                const delta = -Math.sign(e.deltaY) * zoomStep;
                changeZoom(delta, mouseX, mouseY);
            }, { passive: false });
            
            // Touch event handlers
            container.addEventListener('touchstart', function(e) {
                e.preventDefault();
                
                const touches = e.touches;
                
                // Check for double tap
                const currentTime = new Date().getTime();
                const tapLength = currentTime - lastTapTime;
                
                if (tapLength < 100 && tapLength > 0 && touches.length === 1) {
                    // Double tap detected - reset zoom
                    centerImageStrip();
                    lastTapTime = 0; // Reset tap timer
                } else {
                    lastTapTime = currentTime;
                }
                
                if (touches.length === 1) {
                    // Single touch - start drag
                    isDragging = true;
                    lastTouchX = touches[0].clientX;
                    lastTouchY = touches[0].clientY;
                } else if (touches.length === 2) {
                    // Pinch gesture - start zoom
                    lastDistance = getDistance(
                        touches[0].clientX, touches[0].clientY,
                        touches[1].clientX, touches[1].clientY
                    );
                }
            }, { passive: false });
            
            container.addEventListener('touchmove', function(e) {
                e.preventDefault();
                
                const touches = e.touches;
                
                if (isDragging && touches.length === 1) {
                    // Handle drag
                    const touchX = touches[0].clientX;
                    const touchY = touches[0].clientY;
                    
                    const deltaX = touchX - lastTouchX;
                    const deltaY = touchY - lastTouchY;
                    
                    translateX += deltaX;
                    translateY += deltaY;
                    
                    lastTouchX = touchX;
                    lastTouchY = touchY;
                    
                    updateTransform();
                } else if (touches.length === 2) {
                    // Handle pinch zoom
                    const currentDistance = getDistance(
                        touches[0].clientX, touches[0].clientY,
                        touches[1].clientX, touches[1].clientY
                    );
                    
                    if (lastDistance > 0) {
                        // Calculate the midpoint between the two touches
                        const midX = (touches[0].clientX + touches[1].clientX) / 2;
                        const midY = (touches[0].clientY + touches[1].clientY) / 2;
                        
                        // Get position relative to container
                        const rect = container.getBoundingClientRect();
                        const centerX = midX - rect.left;
                        const centerY = midY - rect.top;
                        
                        // Calculate zoom factor
                        const zoomFactor = (currentDistance / lastDistance) - 1;
                        changeZoom(zoomFactor * 0.5, centerX, centerY);
                    }
                    
                    lastDistance = currentDistance;
                }
            }, { passive: false });
            
            container.addEventListener('touchend', function(e) {
                isDragging = false;
                if (e.touches.length === 0) {
                    lastDistance = 0;
                }
            }, { passive: false });
            
            // Calculate distance between two points (for pinch zoom)
            function getDistance(x1, y1, x2, y2) {
                return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
            }
            
            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                // Only respond to keyboard if not in any input field
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                    return;
                }
                
                switch (e.key) {
                    case 'ArrowLeft':
                        translateX += moveStep;
                        updateTransform();
                        e.preventDefault();
                        break;
                    case 'ArrowRight':
                        translateX -= moveStep;
                        updateTransform();
                        e.preventDefault();
                        break;
                    case 'ArrowUp':
                        translateY += moveStep;
                        updateTransform();
                        e.preventDefault();
                        break;
                    case 'ArrowDown':
                        translateY -= moveStep;
                        updateTransform();
                        e.preventDefault();
                        break;
                    case '+':
                    case '=': // For keyboards where = is + without shift
                        changeZoom(zoomStep);
                        e.preventDefault();
                        break;
                    case '-':
                        changeZoom(-zoomStep);
                        e.preventDefault();
                        break;
                    case 'Escape':
                        if (document.fullscreenElement) {
                            document.exitFullscreen();
                        }
                        break;
                }
            });
            
            // Zoom button handlers
            zoomInBtn.addEventListener('click', function() {
                changeZoom(zoomStep);
            });
            
            zoomOutBtn.addEventListener('click', function() {
                changeZoom(-zoomStep);
            });
            
            resetZoomBtn.addEventListener('click', function() {
                currentZoom = 1;
                centerImageStrip();
            });
            
            // Prevent context menu on right-click
            container.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            });
            
            // Initialize
            window.addEventListener('load', function() {
                // Short delay to ensure images are loaded and sizes are calculated
                setTimeout(centerImageStrip, 100);
                // Set focus to container to ensure keyboard events work
                container.focus();
            });
            
            // Handle window resize
            window.addEventListener('resize', centerImageStrip);
            
            // Force focus on the container to ensure keyboard events work
            container.tabIndex = 0;
            container.focus();
        });
    </script>
</body>
</html>